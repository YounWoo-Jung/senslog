---
import BaseLayout from "../../layouts/BaseLayout.astro";
import TagList from "../../components/TagList.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog", ({ data }) => !data.draft);

const tagMap = new Map<string, number>();
for (const post of posts) {
  for (const tag of post.data.tags) {
    tagMap.set(tag, (tagMap.get(tag) || 0) + 1);
  }
}

const tags = [...tagMap.entries()].sort((a, b) => b[1] - a[1]);
---

<BaseLayout title="태그 — SensLog">
  <h1 class="page-heading">태그</h1>
  <TagList tags={tags} />
</BaseLayout>
